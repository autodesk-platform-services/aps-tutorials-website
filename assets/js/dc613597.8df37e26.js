"use strict";(self.webpackChunkaps_tutorials_website=self.webpackChunkaps_tutorials_website||[]).push([[487],{4472:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(6540),r=n(9489),o=n(7227);function i(e){let{NodeJsVsCode:t,DotNetVsCode:n,DotNetVs2022:i}=e;return a.createElement(r.A,{groupId:"development-environment"},a.createElement(o.A,{value:"nodejs-vscode",label:"Node.js & VSCode",default:!0},a.createElement(t,null)),a.createElement(o.A,{value:"dotnet-vscode",label:".NET & VSCode"},a.createElement(n,null)),a.createElement(o.A,{value:"dotnet-vs2022",label:".NET & VS2022"},a.createElement(i,null)))}},4980:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/auth-response-e690484520882a382b8404b417e32853.webp"},5680:(e,t,n)=>{n.d(t,{xA:()=>u,yg:()=>m});var a=n(6540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(n),d=r,m=p["".concat(l,".").concat(d)]||p[d]||g[d]||o;return n?a.createElement(m,i(i({ref:t},u),{},{components:n})):a.createElement(m,i({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7227:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(6540),r=n(53);const o={tabItem:"tabItem_Ymn6"};function i(e){let{children:t,hidden:n,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.A)(o.tabItem,i),hidden:n},t)}},9201:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>x,contentTitle:()=>D,default:()=>O,frontMatter:()=>E,metadata:()=>I,toc:()=>_});var a=n(8168),r=(n(6540),n(5680)),o=n(4472);const i={toc:[]},s="wrapper";function l(e){let{components:t,...n}=e;return(0,r.yg)(s,(0,a.A)({},i,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"Create an ",(0,r.yg)("inlineCode",{parentName:"p"},"aps.js")," file under the ",(0,r.yg)("inlineCode",{parentName:"p"},"services")," folder. This is where we will be implementing\nall the APS logic that will be used in different areas of our server application. Let's start\nby adding the following code to the file:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js",metastring:'title="services/aps.js"',title:'"services/aps.js"'},"const { AuthenticationClient, Scopes } = require('@aps_sdk/authentication');\nconst { OssClient, Region, PolicyKey } = require('@aps_sdk/oss');\nconst { ModelDerivativeClient, View, OutputType } = require('@aps_sdk/model-derivative');\nconst { APS_CLIENT_ID, APS_CLIENT_SECRET, APS_BUCKET } = require('../config.js');\n\nconst authenticationClient = new AuthenticationClient();\nconst ossClient = new OssClient();\nconst modelDerivativeClient = new ModelDerivativeClient();\n\nconst service = module.exports = {};\n\nasync function getInternalToken() {\n    const credentials = await authenticationClient.getTwoLeggedToken(APS_CLIENT_ID, APS_CLIENT_SECRET, [\n        Scopes.DataRead,\n        Scopes.DataCreate,\n        Scopes.DataWrite,\n        Scopes.BucketCreate,\n        Scopes.BucketRead\n    ]);\n    return credentials.access_token;\n}\n\nservice.getViewerToken = async () => {\n    return await authenticationClient.getTwoLeggedToken(APS_CLIENT_ID, APS_CLIENT_SECRET, [Scopes.ViewablesRead]);\n};\n")),(0,r.yg)("p",null,"The code provides two helper functions - one for generating access tokens for internal use\n(giving us read/write access to the Data Management buckets and objects), and one for generating\ntokens for public use (only giving a read access to the translation outputs from the Model Derivative\nservice)."))}l.isMDXComponent=!0;const c={toc:[]},u="wrapper";function p(e){let{components:t,...n}=e;return(0,r.yg)(u,(0,a.A)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"Create an ",(0,r.yg)("inlineCode",{parentName:"p"},"auth.js")," file under the ",(0,r.yg)("inlineCode",{parentName:"p"},"routes")," subfolder with the following content:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js",metastring:'title="routes/auth.js"',title:'"routes/auth.js"'},"const express = require('express');\nconst { getViewerToken } = require('../services/aps.js');\n\nlet router = express.Router();\n\nrouter.get('/api/auth/token', async function (req, res, next) {\n    try {\n        res.json(await getViewerToken());\n    } catch (err) {\n        next(err);\n    }\n});\n\nmodule.exports = router;\n")),(0,r.yg)("p",null,"Here we implement a new ",(0,r.yg)("a",{parentName:"p",href:"http://expressjs.com/en/4x/api.html#router"},"Express Router")," that will handle\nrequests coming to our server, with the URL ending with ",(0,r.yg)("inlineCode",{parentName:"p"},"/token"),", by generating a public access token\nand sending it back to the client as a JSON response."),(0,r.yg)("p",null,'Let\'s "mount" the router to our server application by modifying the ',(0,r.yg)("inlineCode",{parentName:"p"},"server.js"),":"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js",metastring:'title="server.js"',title:'"server.js"'},"const express = require('express');\nconst { PORT } = require('./config.js');\n\nlet app = express();\napp.use(express.static('wwwroot'));\n// highlight-start\napp.use(require('./routes/auth.js'));\n// highlight-end\napp.listen(PORT, function () { console.log(`Server listening on port ${PORT}...`); });\n")))}p.isMDXComponent=!0;const g={toc:[]},d="wrapper";function m(e){let{components:t,...n}=e;return(0,r.yg)(d,(0,a.A)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"If the application is still running, restart it (for example, using ",(0,r.yg)("em",{parentName:"p"},"Run > Restart Debugging"),",\nor by clicking the green restart icon), otherwise start it again (using ",(0,r.yg)("em",{parentName:"p"},"Run > Start Debugging"),",\nor by pressing ",(0,r.yg)("inlineCode",{parentName:"p"},"F5"),"). When you navigate to ",(0,r.yg)("a",{parentName:"p",href:"http://localhost:8080/api/auth/token"},"http://localhost:8080/api/auth/token"),"\nin the browser, the server should now respond with a JSON object containing the access token data."))}m.isMDXComponent=!0;const h={toc:[]},y="wrapper";function f(e){let{components:t,...n}=e;return(0,r.yg)(y,(0,a.A)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"Create an ",(0,r.yg)("inlineCode",{parentName:"p"},"APS.cs")," file under the ",(0,r.yg)("inlineCode",{parentName:"p"},"Models")," subfolder. That is where we will be implementing\nall the APS-specific logic that will be used in different areas of our server application. Let's\nstart by adding the following code to the file:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Models/APS.cs"',title:'"Models/APS.cs"'},'public partial class APS\n{\n    private readonly string _clientId;\n    private readonly string _clientSecret;\n    private readonly string _bucket;\n\n    public APS(string clientId, string clientSecret, string bucket = null)\n    {\n        _clientId = clientId;\n        _clientSecret = clientSecret;\n        _bucket = string.IsNullOrEmpty(bucket) ? string.Format("{0}-basic-app", _clientId.ToLower()) : bucket;\n    }\n}\n')),(0,r.yg)("p",null,"Notice that the ",(0,r.yg)("inlineCode",{parentName:"p"},"APS")," class is declared as ",(0,r.yg)("inlineCode",{parentName:"p"},"partial"),". We're going to extend it\nin other ",(0,r.yg)("inlineCode",{parentName:"p"},"*.cs")," files later. An ",(0,r.yg)("inlineCode",{parentName:"p"},"APS")," singleton will then be provided to our server\nthrough ASP.NET's ",(0,r.yg)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection?view=aspnetcore-6.0"},"dependency injection"),"."),(0,r.yg)("p",null,"Then create another file in the same ",(0,r.yg)("inlineCode",{parentName:"p"},"Models")," subfolder, and call it ",(0,r.yg)("inlineCode",{parentName:"p"},"APS.Auth.cs"),".\nHere we will implement all the authentication logic. Populate the file with the following code:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Models/APS.Auth.cs"',title:'"Models/APS.Auth.cs"'},"using System;\nusing System.Collections.Generic;\nusing System.Threading.Tasks;\nusing Autodesk.Authentication;\nusing Autodesk.Authentication.Model;\n\npublic record Token(string AccessToken, DateTime ExpiresAt);\n\npublic partial class APS\n{\n    private Token _internalTokenCache;\n    private Token _publicTokenCache;\n\n    private async Task<Token> GetToken(List<Scopes> scopes)\n    {\n        var authenticationClient = new AuthenticationClient();\n        var auth = await authenticationClient.GetTwoLeggedTokenAsync(_clientId, _clientSecret, scopes);\n        return new Token(auth.AccessToken, DateTime.UtcNow.AddSeconds((double)auth.ExpiresIn));\n    }\n\n    public async Task<Token> GetPublicToken()\n    {\n        if (_publicTokenCache == null || _publicTokenCache.ExpiresAt < DateTime.UtcNow)\n            _publicTokenCache = await GetToken([Scopes.ViewablesRead]);\n        return _publicTokenCache;\n    }\n\n    private async Task<Token> GetInternalToken()\n    {\n        if (_internalTokenCache == null || _internalTokenCache.ExpiresAt < DateTime.UtcNow)\n            _internalTokenCache = await GetToken([Scopes.BucketCreate, Scopes.BucketRead, Scopes.DataRead, Scopes.DataWrite, Scopes.DataCreate]);\n        return _internalTokenCache;\n    }\n}\n")),(0,r.yg)("p",null,"This part of the ",(0,r.yg)("inlineCode",{parentName:"p"},"APS")," class provides two helper methods - one for internal use\n(giving us read/write access to the Data Management buckets and objects), and one for public use\n(only allowing access to the translation outputs from the Model Derivative service)."),(0,r.yg)("p",null,"Next, let's update our ",(0,r.yg)("inlineCode",{parentName:"p"},"Startup.cs")," file to make a singleton instance of the ",(0,r.yg)("inlineCode",{parentName:"p"},"APS")," class\navailable to our server application:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Startup.cs"',title:'"Startup.cs"'},'using System;\nusing Microsoft.AspNetCore.Builder;\nusing Microsoft.AspNetCore.Hosting;\nusing Microsoft.Extensions.Configuration;\nusing Microsoft.Extensions.DependencyInjection;\nusing Microsoft.Extensions.Hosting;\n\npublic class Startup\n{\n    public Startup(IConfiguration configuration)\n    {\n        Configuration = configuration;\n    }\n\n    public IConfiguration Configuration { get; }\n\n    // This method gets called by the runtime. Use this method to add services to the container.\n    public void ConfigureServices(IServiceCollection services)\n    {\n        services.AddControllers();\n        var clientID = Configuration["APS_CLIENT_ID"];\n        var clientSecret = Configuration["APS_CLIENT_SECRET"];\n        var bucket = Configuration["APS_BUCKET"]; // Optional\n        if (string.IsNullOrEmpty(clientID) || string.IsNullOrEmpty(clientSecret))\n        {\n            throw new ApplicationException("Missing required environment variables APS_CLIENT_ID or APS_CLIENT_SECRET.");\n        }\n        // highlight-start\n        services.AddSingleton(new APS(clientID, clientSecret, bucket));\n        // highlight-end\n    }\n\n    // This method gets called by the runtime. Use this method to configure the HTTP request pipeline.\n    public void Configure(IApplicationBuilder app, IWebHostEnvironment env)\n    {\n        if (env.IsDevelopment())\n        {\n            app.UseDeveloperExceptionPage();\n        }\n        app.UseDefaultFiles();\n        app.UseStaticFiles();\n        app.UseRouting();\n        app.UseEndpoints(endpoints =>\n        {\n            endpoints.MapControllers();\n        });\n    }\n}\n')))}f.isMDXComponent=!0;const b={toc:[]},v="wrapper";function w(e){let{components:t,...n}=e;return(0,r.yg)(v,(0,a.A)({},b,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"Create an ",(0,r.yg)("inlineCode",{parentName:"p"},"AuthController.cs")," file under the ",(0,r.yg)("inlineCode",{parentName:"p"},"Controllers")," subfolder with the following content:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-csharp",metastring:'title="Controllers/AuthController.cs"',title:'"Controllers/AuthController.cs"'},'using System;\nusing System.Threading.Tasks;\nusing Microsoft.AspNetCore.Mvc;\n\n[ApiController]\n[Route("api/[controller]")]\npublic class AuthController : ControllerBase\n{\n    private readonly APS _aps;\n\n    public AuthController(APS aps)\n    {\n        _aps = aps;\n    }\n\n    [HttpGet("token")]\n    public async Task<IActionResult> GetAccessToken()\n    {\n        var token = await _aps.GetPublicToken();\n        return Ok(new\n        {\n            access_token = token.AccessToken,\n            expires_in = (long)Math.Round((token.ExpiresAt - DateTime.UtcNow).TotalSeconds)\n        });\n    }\n}\n')),(0,r.yg)("p",null,"The controller will receive the instance of ",(0,r.yg)("inlineCode",{parentName:"p"},"APS")," - our Autodesk Platform Services client - through ASP.NET's\n",(0,r.yg)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection?view=aspnetcore-6.0"},"Dependency injection"),",\nand it will handle requests to ",(0,r.yg)("inlineCode",{parentName:"p"},"/api/auth/token")," by generating a new access token\nand sending it back to the client as a JSON payload."))}w.isMDXComponent=!0;const C={toc:[]},T="wrapper";function k(e){let{components:t,...n}=e;return(0,r.yg)(T,(0,a.A)({},C,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"If the application is still running, restart it (for example, using ",(0,r.yg)("em",{parentName:"p"},"Run > Restart Debugging"),",\nor by clicking the green restart icon), otherwise start it again (using ",(0,r.yg)("em",{parentName:"p"},"Run > Start Debugging"),",\nor by pressing ",(0,r.yg)("inlineCode",{parentName:"p"},"F5"),"). When you navigate to ",(0,r.yg)("a",{parentName:"p",href:"http://localhost:8080/api/auth/token"},"http://localhost:8080/api/auth/token"),"\nin the browser, the server should now respond with a JSON object containing the access token data."))}k.isMDXComponent=!0;const N={toc:[]},S="wrapper";function A(e){let{components:t,...n}=e;return(0,r.yg)(S,(0,a.A)({},N,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"If the application is still running, restart it (for example, using ",(0,r.yg)("em",{parentName:"p"},"Debug > Restart"),",\nor by pressing ",(0,r.yg)("inlineCode",{parentName:"p"},"Ctrl"),"+",(0,r.yg)("inlineCode",{parentName:"p"},"Shift"),"+",(0,r.yg)("inlineCode",{parentName:"p"},"F5"),"), otherwise start it again (using ",(0,r.yg)("em",{parentName:"p"},"Debug > Start Debugging"),",\nor by pressing ",(0,r.yg)("inlineCode",{parentName:"p"},"F5"),"). When you navigate to ",(0,r.yg)("a",{parentName:"p",href:"http://localhost:8080/api/auth/token"},"http://localhost:8080/api/auth/token"),"\nin the browser, the server should now respond with a JSON object containing the access token data."))}A.isMDXComponent=!0;const E={},D="Authentication",I={unversionedId:"tutorials/simple-viewer/auth",id:"tutorials/simple-viewer/auth",title:"Authentication",description:"In this step we're going to extend the server implementation so that it can authenticate itself",source:"@site/docs/03-tutorials/01-simple-viewer/02-auth.mdx",sourceDirName:"03-tutorials/01-simple-viewer",slug:"/tutorials/simple-viewer/auth",permalink:"/tutorials/simple-viewer/auth",draft:!1,editUrl:"https://github.com/autodesk-platform-services/aps-tutorials-website/edit/master/docs/03-tutorials/01-simple-viewer/02-auth.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Application Setup",permalink:"/tutorials/simple-viewer/setup"},next:{title:"Data & Derivatives",permalink:"/tutorials/simple-viewer/data"}},x={},_=[{value:"Access tokens",id:"access-tokens",level:2},{value:"Server endpoints",id:"server-endpoints",level:2},{value:"Try it out",id:"try-it-out",level:2}],P={toc:_},j="wrapper";function O(e){let{components:t,...i}=e;return(0,r.yg)(j,(0,a.A)({},P,i,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"authentication"},"Authentication"),(0,r.yg)("p",null,"In this step we're going to extend the server implementation so that it can authenticate itself\nto the APS platform, and generate access tokens for different use cases."),(0,r.yg)("admonition",{type:"tip"},(0,r.yg)("p",{parentName:"admonition"},'It is a good practice to generate an "internal" token with more capabilities (for example,\nallowing you to create or delete files in the Data Management service) that will only be used\nby the server, and a "public" token with fewer capabilities that can be safely shared with\nthe client-side logic.')),(0,r.yg)("h2",{id:"access-tokens"},"Access tokens"),(0,r.yg)(o.A,{NodeJsVsCode:l,DotNetVsCode:f,DotNetVs2022:f,mdxType:"EnvTabs"}),(0,r.yg)("h2",{id:"server-endpoints"},"Server endpoints"),(0,r.yg)("p",null,"Now we can expose this functionality through the first endpoint of our server."),(0,r.yg)(o.A,{NodeJsVsCode:p,DotNetVsCode:w,DotNetVs2022:w,mdxType:"EnvTabs"}),(0,r.yg)("h2",{id:"try-it-out"},"Try it out"),(0,r.yg)("p",null,"Let's see if our new server endpoint works."),(0,r.yg)(o.A,{NodeJsVsCode:m,DotNetVsCode:k,DotNetVs2022:A,mdxType:"EnvTabs"}),(0,r.yg)("admonition",{type:"tip"},(0,r.yg)("p",{parentName:"admonition"},"If you are using Google Chrome, consider installing ",(0,r.yg)("a",{parentName:"p",href:"https://chrome.google.com/webstore/detail/json-formatter/bcjindcccaagfpapjjmafapmmgkkhgoa?hl=en"},"JSON Formatter"),"\nor a similar extension to automatically format JSON responses.")),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"Server Response",src:n(4980).A,width:"1500",height:"929"})))}O.isMDXComponent=!0},9489:(e,t,n)=>{n.d(t,{A:()=>C});var a=n(8168),r=n(6540),o=n(53),i=n(4245),s=n(6347),l=n(2814),c=n(5167),u=n(1269);function p(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function g(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??p(n);return function(e){const t=(0,c.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function d(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const a=(0,s.W6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l.aZ)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(a.location.search);t.set(o,e),a.replace({...a.location,search:t.toString()})}),[o,a])]}function h(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,o=g(e),[i,s]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o}))),[l,c]=m({queryString:n,groupId:a}),[p,h]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,o]=(0,u.Dv)(n);return[a,(0,r.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:a}),y=(()=>{const e=l??p;return d({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{y&&s(y)}),[y]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!d({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);s(e),c(e),h(e)}),[c,h,o]),tabValues:o}}var y=n(1062);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function b(e){let{className:t,block:n,selectedValue:s,selectValue:l,tabValues:c}=e;const u=[],{blockElementScrollPositionUntilNextRender:p}=(0,i.a_)(),g=e=>{const t=e.currentTarget,n=u.indexOf(t),a=c[n].value;a!==s&&(p(t),l(a))},d=e=>{let t=null;switch(e.key){case"Enter":g(e);break;case"ArrowRight":{const n=u.indexOf(e.currentTarget)+1;t=u[n]??u[0];break}case"ArrowLeft":{const n=u.indexOf(e.currentTarget)-1;t=u[n]??u[u.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":n},t)},c.map((e=>{let{value:t,label:n,attributes:i}=e;return r.createElement("li",(0,a.A)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:e=>u.push(e),onKeyDown:d,onClick:g},i,{className:(0,o.A)("tabs__item",f.tabItem,i?.className,{"tabs__item--active":s===t})}),n??t)})))}function v(e){let{lazy:t,children:n,selectedValue:a}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function w(e){const t=h(e);return r.createElement("div",{className:(0,o.A)("tabs-container",f.tabList)},r.createElement(b,(0,a.A)({},e,t)),r.createElement(v,(0,a.A)({},e,t)))}function C(e){const t=(0,y.A)();return r.createElement(w,(0,a.A)({key:String(t)},e))}}}]);