"use strict";(self.webpackChunkaps_tutorials_website=self.webpackChunkaps_tutorials_website||[]).push([[826],{4137:(n,e,t)=>{t.d(e,{Zo:()=>u,kt:()=>f});var a=t(7294);function i(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function o(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,a)}return t}function r(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach((function(e){i(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function l(n,e){if(null==n)return{};var t,a,i=function(n,e){if(null==n)return{};var t,a,i={},o=Object.keys(n);for(a=0;a<o.length;a++)t=o[a],e.indexOf(t)>=0||(i[t]=n[t]);return i}(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(a=0;a<o.length;a++)t=o[a],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}var s=a.createContext({}),c=function(n){var e=a.useContext(s),t=e;return n&&(t="function"==typeof n?n(e):r(r({},e),n)),t},u=function(n){var e=c(n.components);return a.createElement(s.Provider,{value:e},n.children)},d={inlineCode:"code",wrapper:function(n){var e=n.children;return a.createElement(a.Fragment,{},e)}},p=a.forwardRef((function(n,e){var t=n.components,i=n.mdxType,o=n.originalType,s=n.parentName,u=l(n,["components","mdxType","originalType","parentName"]),p=c(t),f=i,m=p["".concat(s,".").concat(f)]||p[f]||d[f]||o;return t?a.createElement(m,r(r({ref:e},u),{},{components:t})):a.createElement(m,r({ref:e},u))}));function f(n,e){var t=arguments,i=e&&e.mdxType;if("string"==typeof n||i){var o=t.length,r=new Array(o);r[0]=p;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=n,l.mdxType="string"==typeof n?n:i,r[1]=l;for(var c=2;c<o;c++)r[c]=t[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},425:(n,e,t)=>{t.d(e,{Z:()=>r});var a=t(7294),i=t(6010);const o="tabItem_Ymn6";function r(n){let{children:e,hidden:t,className:r}=n;return a.createElement("div",{role:"tabpanel",className:(0,i.Z)(o,r),hidden:t},e)}},3992:(n,e,t)=>{t.d(e,{Z:()=>x});var a=t(7462),i=t(7294),o=t(6010),r=t(2957),l=t(6550),s=t(5238),c=t(3609),u=t(2560);function d(n){return function(n){return i.Children.map(n,(n=>{if((0,i.isValidElement)(n)&&"value"in n.props)return n;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof n.type?n.type:n.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))}(n).map((n=>{let{props:{value:e,label:t,attributes:a,default:i}}=n;return{value:e,label:t,attributes:a,default:i}}))}function p(n){const{values:e,children:t}=n;return(0,i.useMemo)((()=>{const n=e??d(t);return function(n){const e=(0,c.l)(n,((n,e)=>n.value===e.value));if(e.length>0)throw new Error(`Docusaurus error: Duplicate values "${e.map((n=>n.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(n),n}),[e,t])}function f(n){let{value:e,tabValues:t}=n;return t.some((n=>n.value===e))}function m(n){let{queryString:e=!1,groupId:t}=n;const a=(0,l.k6)(),o=function(n){let{queryString:e=!1,groupId:t}=n;if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,s._X)(o),(0,i.useCallback)((n=>{if(!o)return;const e=new URLSearchParams(a.location.search);e.set(o,n),a.replace({...a.location,search:e.toString()})}),[o,a])]}function v(n){const{defaultValue:e,queryString:t=!1,groupId:a}=n,o=p(n),[r,l]=(0,i.useState)((()=>function(n){let{defaultValue:e,tabValues:t}=n;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!f({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map((n=>n.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=t.find((n=>n.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:e,tabValues:o}))),[s,c]=m({queryString:t,groupId:a}),[d,v]=function(n){let{groupId:e}=n;const t=function(n){return n?`docusaurus.tab.${n}`:null}(e),[a,o]=(0,u.Nk)(t);return[a,(0,i.useCallback)((n=>{t&&o.set(n)}),[t,o])]}({groupId:a}),g=(()=>{const n=s??d;return f({value:n,tabValues:o})?n:null})();(0,i.useLayoutEffect)((()=>{g&&l(g)}),[g]);return{selectedValue:r,selectValue:(0,i.useCallback)((n=>{if(!f({value:n,tabValues:o}))throw new Error(`Can't select invalid tab value=${n}`);l(n),c(n),v(n)}),[c,v,o]),tabValues:o}}var g=t(1048);const b="tabList__CuJ",h="tabItem_LNqP";function y(n){let{className:e,block:t,selectedValue:l,selectValue:s,tabValues:c}=n;const u=[],{blockElementScrollPositionUntilNextRender:d}=(0,r.o5)(),p=n=>{const e=n.currentTarget,t=u.indexOf(e),a=c[t].value;a!==l&&(d(e),s(a))},f=n=>{let e=null;switch(n.key){case"Enter":p(n);break;case"ArrowRight":{const t=u.indexOf(n.currentTarget)+1;e=u[t]??u[0];break}case"ArrowLeft":{const t=u.indexOf(n.currentTarget)-1;e=u[t]??u[u.length-1];break}}e?.focus()};return i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":t},e)},c.map((n=>{let{value:e,label:t,attributes:r}=n;return i.createElement("li",(0,a.Z)({role:"tab",tabIndex:l===e?0:-1,"aria-selected":l===e,key:e,ref:n=>u.push(n),onKeyDown:f,onClick:p},r,{className:(0,o.Z)("tabs__item",h,r?.className,{"tabs__item--active":l===e})}),t??e)})))}function w(n){let{lazy:e,children:t,selectedValue:a}=n;if(t=Array.isArray(t)?t:[t],e){const n=t.find((n=>n.props.value===a));return n?(0,i.cloneElement)(n,{className:"margin-top--md"}):null}return i.createElement("div",{className:"margin-top--md"},t.map(((n,e)=>(0,i.cloneElement)(n,{key:e,hidden:n.props.value!==a}))))}function k(n){const e=v(n);return i.createElement("div",{className:(0,o.Z)("tabs-container",b)},i.createElement(y,(0,a.Z)({},n,e)),i.createElement(w,(0,a.Z)({},n,e)))}function x(n){const e=(0,g.Z)();return i.createElement(k,(0,a.Z)({key:String(e)},n))}},415:(n,e,t)=>{t.d(e,{Z:()=>r});var a=t(7294),i=t(3992),o=t(425);function r(n){let{NodeJsVsCode:e,DotNetVsCode:t,DotNetVs2022:r}=n;return a.createElement(i.Z,{groupId:"development-environment"},a.createElement(o.Z,{value:"nodejs-vscode",label:"Node.js & VSCode",default:!0},a.createElement(e,null)),a.createElement(o.Z,{value:"dotnet-vscode",label:".NET 6 & VSCode"},a.createElement(t,null)),a.createElement(o.Z,{value:"dotnet-vs2022",label:".NET 6 & VS2022"},a.createElement(r,null)))}},8504:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>w,contentTitle:()=>h,default:()=>A,frontMatter:()=>b,metadata:()=>y,toc:()=>k});var a=t(7462),i=(t(7294),t(4137));const o={toc:[]};function r(n){let{components:e,...t}=n;return(0,i.kt)("wrapper",(0,a.Z)({},o,t,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html",metastring:"title=wwwroot/index.html",title:"wwwroot/index.html"},'<!DOCTYPE html>\n<html>\n  <head>\n    <title>APS - Design Automation</title>\n    <meta charset="utf-8" />\n    <link rel="shortcut icon" href="https://cdn.autodesk.io/favicon.ico" />\n    \x3c!-- Common packages: jQuery, Bootstrap --\x3e\n    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"><\/script>\n    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js"><\/script>\n    <link\n      rel="stylesheet"\n      href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css"\n    />\n    \x3c!-- Socket.io The io method is bound to the global scope in the standalone build--\x3e\n    <script src="/socket.io/socket.io.js"><\/script>\n    \x3c!-- Files for this project --\x3e\n    <script src="/js/ApsDesignAutomation.js"><\/script>\n  </head>\n\n  <body style="height: 100%;">\n    \x3c!-- Fixed navbar by Bootstrap: https://getbootstrap.com/examples/navbar-fixed-top/ --\x3e\n    <nav class="navbar navbar-default navbar-fixed-top">\n      <div class="container-fluid">\n        <ul class="nav navbar-nav left">\n          <li>\n            <a href="http://tutorials.autodesk.io" target="_blank">\n              <img\n                alt="Autodesk APS"\n                src="https://cdn.autodesk.io/logo/black/stacked.png"\n                height="20"\n              />\n            </a>\n          </li>\n        </ul>\n        <div style="float: right; margin-top: 15px; cursor: pointer;">\n          <span\n            style="padding-right: 5px;"\n            data-toggle="modal"\n            data-target="#defineActivityModal"\n            title="Configura AppBundle & Activity"\n          >\n            <span class="glyphicon glyphicon-cog glyphiconTop mlink"> </span>\n            Configure\n          </span>\n        </div>\n      </div>\n    </nav>\n    \x3c!-- End of navbar --\x3e\n    <div class="container-fluid" style="margin-top: 70px;">\n      <div class="row">\n        <div class="col-sm-4">\n          <div class="form-group">\n            <label for="width">Width:</label>\n            <input\n              type="number"\n              class="form-control"\n              id="width"\n              placeholder="Enter new width value"\n            />\n          </div>\n          <div class="form-group">\n            <label for="height">Height:</label>\n            <input\n              type="number"\n              class="form-control"\n              id="height"\n              placeholder="Enter new height value"\n            />\n          </div>\n\n          <div class="form-group">\n            <label for="inputFile">Input file</label>\n            <input type="file" class="form-control-file" id="inputFile" />\n          </div>\n          <div class="form-group">\n            <label for="activity">Existing activities</label>\n            <select class="form-control" id="activity"></select>\n          </div>\n          <center>\n            <button class="btn btn-primary" id="startWorkitem">\n              Start workitem\n            </button>\n          </center>\n          <br />\n        </div>\n        <div class="col-sm-8">\n          <pre\n            id="outputlog"\n            style="height: calc(100vh - 120px);; overflow-y: scroll;"\n          ></pre>\n        </div>\n      </div>\n    </div>\n    \x3c!-- Modal Define AppBundle & Activity --\x3e\n    <div\n      class="modal fade"\n      id="defineActivityModal"\n      tabindex="-1"\n      role="dialog"\n      aria-labelledby="myModalLabel"\n    >\n      <div class="modal-dialog" role="document">\n        <div class="modal-content">\n          <div class="modal-header">\n            <button\n              type="button"\n              class="close"\n              data-dismiss="modal"\n              aria-label="Cancel"\n            >\n              <span aria-hidden="true">&times;</span>\n            </button>\n            <h4 class="modal-title" id="myModalLabel">\n              Create/Update AppBundle & Activity\n            </h4>\n          </div>\n          <div class="modal-body">\n            <div class="alert alert-warning">\n              <center>\n                You just need to define AppBundle &amp; Activity once.<br />If\n                the plugin code changed, redefine (creates a new version).\n              </center>\n            </div>\n            <div class="form-group">\n              <label for="localBundles">Select a local AppBundle:</label>\n              <select class="form-control" id="localBundles"></select>\n              <b>Tip:</b> Make sure .ZIP bundles are placed at\n              <b>/bundles/</b> folder\n            </div>\n            <div class="form-group">\n              <label for="engines">Select engine:</label>\n              <select class="form-control" id="engines"></select>\n            </div>\n            For this sample the .ZIP name is used as suffix to define\n            <b>AppBundle</b> and <b>Activity</b>\n            names. Activities will have file and params input, and file output.\n          </div>\n          <div class="modal-footer">\n            <button class="btn btn-danger" id="clearAccount">\n              Clear account\n            </button>\n            <button\n              type="button"\n              class="btn btn-primary"\n              id="createAppBundleActivity"\n            >\n              Create/Update\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>\n')))}r.isMDXComponent=!0;var l=t(6943);const s={toc:[]};function c(n){let{components:e,...t}=n;return(0,i.kt)("wrapper",(0,a.Z)({},s,t,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:"title=wwwroot/js/ApsDesignAutomation.js",title:"wwwroot/js/ApsDesignAutomation.js"},'$(document).ready(function () {\n  prepareLists();\n\n  $("#clearAccount").click(clearAccount);\n  $("#defineActivityShow").click(defineActivityModal);\n  $("#createAppBundleActivity").click(createAppBundleActivity);\n  $("#startWorkitem").click(startWorkitem);\n\n  startConnection();\n});\n\nfunction prepareLists() {\n  list("activity", "/api/aps/designautomation/activities");\n  list("engines", "/api/aps/designautomation/engines");\n  list("localBundles", "/api/appbundles");\n}\n\nfunction list(control, endpoint) {\n  $("#" + control)\n    .find("option")\n    .remove()\n    .end();\n  jQuery.ajax({\n    url: endpoint,\n    success: function (list) {\n      if (list.length === 0)\n        $("#" + control).append(\n          $("<option>", {\n            disabled: true,\n            text: "Nothing found",\n          })\n        );\n      else\n        list.forEach(function (item) {\n          $("#" + control).append(\n            $("<option>", {\n              value: item,\n              text: item,\n            })\n          );\n        });\n    },\n  });\n}\n\nfunction clearAccount() {\n  if (\n    !confirm(\n      "Clear existing activities & appbundles before start. " +\n        "This is useful if you believe there are wrong settings on your account." +\n        "\\n\\nYou cannot undo this operation. Proceed?"\n    )\n  )\n    return;\n\n  jQuery.ajax({\n    url: "api/aps/designautomation/account",\n    method: "DELETE",\n    success: function () {\n      prepareLists();\n      writeLog("Account cleared, all appbundles & activities deleted");\n    },\n  });\n}\n\nfunction defineActivityModal() {\n  $("#defineActivityModal").modal();\n}\n\nfunction createAppBundleActivity() {\n  startConnection(function () {\n    writeLog("Defining appbundle and activity for " + $("#engines").val());\n    $("#defineActivityModal").modal("toggle");\n    createAppBundle(function () {\n      createActivity(function () {\n        prepareLists();\n      });\n    });\n  });\n}\n\nfunction createAppBundle(cb) {\n  jQuery.ajax({\n    url: "api/aps/designautomation/appbundles",\n    method: "POST",\n    contentType: "application/json",\n    data: JSON.stringify({\n      zipFileName: $("#localBundles").val(),\n      engine: $("#engines").val(),\n    }),\n    success: function (res) {\n      writeLog("AppBundle: " + res.appBundle + ", v" + res.version);\n      if (cb) cb();\n    },\n    error: function (xhr, ajaxOptions, thrownError) {\n      writeLog(\n        " -> " +\n          (xhr.responseJSON && xhr.responseJSON.diagnostic\n            ? xhr.responseJSON.diagnostic\n            : thrownError)\n      );\n    },\n  });\n}\n\nfunction createActivity(cb) {\n  jQuery.ajax({\n    url: "api/aps/designautomation/activities",\n    method: "POST",\n    contentType: "application/json",\n    data: JSON.stringify({\n      zipFileName: $("#localBundles").val(),\n      engine: $("#engines").val(),\n    }),\n    success: function (res) {\n      writeLog("Activity: " + res.activity);\n      if (cb) cb();\n    },\n    error: function (xhr, ajaxOptions, thrownError) {\n      writeLog(\n        " -> " +\n          (xhr.responseJSON && xhr.responseJSON.diagnostic\n            ? xhr.responseJSON.diagnostic\n            : thrownError)\n      );\n    },\n  });\n}\n\nfunction startWorkitem() {\n  var inputFileField = document.getElementById("inputFile");\n  if (inputFileField.files.length === 0) {\n    alert("Please select an input file");\n    return;\n  }\n  if ($("#activity").val() === null) return alert("Please select an activity");\n  var file = inputFileField.files[0];\n  startConnection(function () {\n    var formData = new FormData();\n    formData.append("inputFile", file);\n    formData.append(\n      "data",\n      JSON.stringify({\n        width: $("#width").val(),\n        height: $("#height").val(),\n        activityName: $("#activity").val(),\n        browserConnectionId: connectionId,\n      })\n    );\n    writeLog("Uploading input file...");\n    $.ajax({\n      url: "api/aps/designautomation/workitems",\n      data: formData,\n      processData: false,\n      contentType: false,\n      //contentType: \'multipart/form-data\',\n      //dataType: \'json\',\n      type: "POST",\n      success: function (res) {\n        writeLog("Workitem started: " + res.workItemId);\n      },\n      error: function (xhr, ajaxOptions, thrownError) {\n        writeLog(\n          " -> " +\n            (xhr.responseJSON && xhr.responseJSON.diagnostic\n              ? xhr.responseJSON.diagnostic\n              : thrownError)\n        );\n      },\n    });\n  });\n}\n\nfunction writeLog(text) {\n  $("#outputlog").append(\n    \'<div style="border-top: 1px dashed #C0C0C0">\' + text + "</div>"\n  );\n  var elem = document.getElementById("outputlog");\n  elem.scrollTop = elem.scrollHeight;\n}\n\nvar connection;\nvar connectionId;\n\nfunction startConnection(onReady) {\n  if (connection && connection.connected) {\n    if (onReady) onReady();\n    return;\n  }\n  connection = io();\n  connection.on("connect", function () {\n    connectionId = connection.id;\n    if (onReady) onReady();\n  });\n\n  connection.on("downloadResult", function (url) {\n    writeLog(\'<a href="\' + url + \'">Download result file here</a>\');\n  });\n\n  connection.on("downloadReport", function (url) {\n    writeLog(\'<a href="\' + url + \'">Download report file here</a>\');\n  });\n\n  connection.on("onComplete", function (message) {\n    if (typeof message === "object") message = JSON.stringify(message, null, 2);\n    writeLog(message);\n  });\n}\n')),(0,i.kt)("p",null,"At this point you can run your project, just hit F5, open browser and enter ",(0,i.kt)("a",{parentName:"p",href:"http://localhost:8080"},"http://localhost:8080"),"\nThe html interface is displayed indicating that your project was created correctly. None of the buttons should work... let's move forward."),(0,i.kt)("img",{src:l.Z,style:{width:600}}))}c.isMDXComponent=!0;const u={toc:[]};function d(n){let{components:e,...t}=n;return(0,i.kt)("wrapper",(0,a.Z)({},u,t,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-html",metastring:"title=index.html",title:"index.html"},'<!DOCTYPE html>\n<html>\n  <head>\n    <title>APS - Design Automation</title>\n    <meta charset="utf-8" />\n    <link rel="shortcut icon" href="https://cdn.autodesk.io/favicon.ico" />\n    \x3c!-- Common packages: jQuery, Bootstrap --\x3e\n    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"><\/script>\n    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js"><\/script>\n    <link\n      rel="stylesheet"\n      href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css"\n    />\n    \x3c!-- .NET SignalR --\x3e\n    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/3.1.7/signalr.min.js"><\/script>\n    \x3c!-- Files for this project --\x3e\n    <script src="/js/ApsDesignAutomation.js"><\/script>\n  </head>\n\n  <body style="height: 100%;">\n    \x3c!-- Fixed navbar by Bootstrap: https://getbootstrap.com/examples/navbar-fixed-top/ --\x3e\n    <nav class="navbar navbar-default navbar-fixed-top">\n      <div class="container-fluid">\n        <ul class="nav navbar-nav left">\n          <li>\n            <a href="http://tutorials.autodesk.io" target="_blank">\n              <img\n                alt="Autodesk APS"\n                src="https://cdn.autodesk.io/logo/black/stacked.png"\n                height="20"\n              />\n            </a>\n          </li>\n        </ul>\n        <div style="float: right; margin-top: 15px; cursor: pointer;">\n          <span\n            style="padding-right: 5px;"\n            data-toggle="modal"\n            data-target="#defineActivityModal"\n            title="Configura AppBundle & Activity"\n          >\n            <span class="glyphicon glyphicon-cog glyphiconTop mlink"> </span>\n            Configure\n          </span>\n        </div>\n      </div>\n    </nav>\n    \x3c!-- End of navbar --\x3e\n    <div class="container-fluid" style="margin-top: 70px;">\n      <div class="row">\n        <div class="col-sm-4">\n          <div class="form-group">\n            <label for="width">Width:</label>\n            <input\n              type="number"\n              class="form-control"\n              id="width"\n              placeholder="Enter new width value"\n            />\n          </div>\n          <div class="form-group">\n            <label for="height">Height:</label>\n            <input\n              type="number"\n              class="form-control"\n              id="height"\n              placeholder="Enter new height value"\n            />\n          </div>\n\n          <div class="form-group">\n            <label for="inputFile">Input file</label>\n            <input type="file" class="form-control-file" id="inputFile" />\n          </div>\n          <div class="form-group">\n            <label for="activity">Existing activities</label>\n            <select class="form-control" id="activity"></select>\n          </div>\n          <center>\n            <button class="btn btn-primary" id="startWorkitem">\n              Start workitem\n            </button>\n          </center>\n          <br />\n        </div>\n        <div class="col-sm-8">\n          <pre\n            id="outputlog"\n            style="height: calc(100vh - 120px);; overflow-y: scroll;"\n          ></pre>\n        </div>\n      </div>\n    </div>\n    \x3c!-- Modal Define AppBundle & Activity --\x3e\n    <div\n      class="modal fade"\n      id="defineActivityModal"\n      tabindex="-1"\n      role="dialog"\n      aria-labelledby="myModalLabel"\n    >\n      <div class="modal-dialog" role="document">\n        <div class="modal-content">\n          <div class="modal-header">\n            <button\n              type="button"\n              class="close"\n              data-dismiss="modal"\n              aria-label="Cancel"\n            >\n              <span aria-hidden="true">&times;</span>\n            </button>\n            <h4 class="modal-title" id="myModalLabel">\n              Create/Update AppBundle & Activity\n            </h4>\n          </div>\n          <div class="modal-body">\n            <div class="alert alert-warning">\n              <center>\n                You just need to define AppBundle &amp; Activity once.<br />If\n                the plugin code changed, redefine (creates a new version).\n              </center>\n            </div>\n            <div class="form-group">\n              <label for="localBundles">Select a local AppBundle:</label>\n              <select class="form-control" id="localBundles"></select>\n              <b>Tip:</b> Make sure .ZIP bundles are placed at\n              <b>/bundles/</b> folder\n            </div>\n            <div class="form-group">\n              <label for="engines">Select engine:</label>\n              <select class="form-control" id="engines"></select>\n            </div>\n            For this sample the .ZIP name is used as suffix to define\n            <b>AppBundle</b> and <b>Activity</b>\n            names. Activities will have file and params input, and file output.\n          </div>\n          <div class="modal-footer">\n            <button class="btn btn-danger" id="clearAccount">\n              Clear account\n            </button>\n            <button\n              type="button"\n              class="btn btn-primary"\n              id="createAppBundleActivity"\n            >\n              Create/Update\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </body>\n</html>\n')))}d.isMDXComponent=!0;const p=t.p+"assets/images/VS2022-dotnet-fs-28f0d44261e71f69d60a25d8c2b23579.webp";var f=t(4562);const m={toc:[]};function v(n){let{components:e,...t}=n;return(0,i.kt)("wrapper",(0,a.Z)({},m,t,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:"title=ApsDesignAutomation.js",title:"ApsDesignAutomation.js"},'$(document).ready(function () {\n  prepareLists();\n\n  $("#clearAccount").click(clearAccount);\n  $("#defineActivityShow").click(defineActivityModal);\n  $("#createAppBundleActivity").click(createAppBundleActivity);\n  $("#startWorkitem").click(startWorkitem);\n\n  startConnection();\n});\n\nfunction prepareLists() {\n  list("activity", "/api/aps/designautomation/activities");\n  list("engines", "/api/aps/designautomation/engines");\n  list("localBundles", "/api/appbundles");\n}\n\nfunction list(control, endpoint) {\n  $("#" + control)\n    .find("option")\n    .remove()\n    .end();\n  jQuery.ajax({\n    url: endpoint,\n    success: function (list) {\n      if (list.length === 0)\n        $("#" + control).append(\n          $("<option>", { disabled: true, text: "Nothing found" })\n        );\n      else\n        list.forEach(function (item) {\n          $("#" + control).append($("<option>", { value: item, text: item }));\n        });\n    },\n  });\n}\n\nfunction clearAccount() {\n  if (\n    !confirm(\n      "Clear existing activities & appbundles before start. " +\n        "This is useful if you believe there are wrong settings on your account." +\n        "\\n\\nYou cannot undo this operation. Proceed?"\n    )\n  )\n    return;\n\n  jQuery.ajax({\n    url: "api/aps/designautomation/account",\n    method: "DELETE",\n    success: function () {\n      prepareLists();\n      writeLog("Account cleared, all appbundles & activities deleted");\n    },\n  });\n}\n\nfunction defineActivityModal() {\n  $("#defineActivityModal").modal();\n}\n\nfunction createAppBundleActivity() {\n  startConnection(function () {\n    writeLog("Defining appbundle and activity for " + $("#engines").val());\n    $("#defineActivityModal").modal("toggle");\n    createAppBundle(function () {\n      createActivity(function () {\n        prepareLists();\n      });\n    });\n  });\n}\n\nfunction createAppBundle(cb) {\n  jQuery.ajax({\n    url: "api/aps/designautomation/appbundles",\n    method: "POST",\n    contentType: "application/json",\n    data: JSON.stringify({\n      zipFileName: $("#localBundles").val(),\n      engine: $("#engines").val(),\n    }),\n    success: function (res) {\n      writeLog("AppBundle: " + res.appBundle + ", v" + res.version);\n      if (cb) cb();\n    },\n  });\n}\n\nfunction createActivity(cb) {\n  jQuery.ajax({\n    url: "api/aps/designautomation/activities",\n    method: "POST",\n    contentType: "application/json",\n    data: JSON.stringify({\n      zipFileName: $("#localBundles").val(),\n      engine: $("#engines").val(),\n    }),\n    success: function (res) {\n      writeLog("Activity: " + res.activity);\n      if (cb) cb();\n    },\n  });\n}\n\nfunction startWorkitem() {\n  var inputFileField = document.getElementById("inputFile");\n  if (inputFileField.files.length === 0) {\n    alert("Please select an input file");\n    return;\n  }\n  if ($("#activity").val() === null) {\n    alert("Please select an activity");\n    return;\n  }\n  var file = inputFileField.files[0];\n  startConnection(function () {\n    var formData = new FormData();\n    formData.append("inputFile", file);\n    formData.append(\n      "data",\n      JSON.stringify({\n        width: $("#width").val(),\n        height: $("#height").val(),\n        activityName: $("#activity").val(),\n        browserConnectionId: connectionId,\n      })\n    );\n    writeLog("Uploading input file...");\n    $.ajax({\n      url: "api/aps/designautomation/workitems",\n      data: formData,\n      processData: false,\n      contentType: false,\n      type: "POST",\n      success: function (res) {\n        writeLog("Workitem started: " + res.workItemId);\n      },\n    });\n  });\n}\n\nfunction writeLog(text) {\n  $("#outputlog").append(\n    \'<div style="border-top: 1px dashed #C0C0C0">\' + text + "</div>"\n  );\n  var elem = document.getElementById("outputlog");\n  elem.scrollTop = elem.scrollHeight;\n}\n\nvar connection;\nvar connectionId;\n\nfunction startConnection(onReady) {\n  if (connection && connection.connectionState) {\n    if (onReady) onReady();\n    return;\n  }\n  connection = new signalR.HubConnectionBuilder()\n    .withUrl("/api/signalr/designautomation")\n    .build();\n  connection.start().then(function () {\n    connection.invoke("getConnectionId").then(function (id) {\n      connectionId = id; // we\'ll need this...\n      if (onReady) onReady();\n    });\n  });\n\n  connection.on("downloadResult", function (url) {\n    writeLog(\'<a href="\' + url + \'">Download result file here</a>\');\n  });\n\n  connection.on("onComplete", function (message) {\n    writeLog(message);\n  });\n}\n')),(0,i.kt)("p",null,"The final result should look like"),(0,i.kt)("img",{src:p,style:{width:300}}),(0,i.kt)("p",null,"At this point you can run your project, just hit play, the HTML interface should open, indicating that your project was created correctly. None of the buttons should work... let's move forward."),(0,i.kt)("img",{src:f.Z,style:{width:600}}))}v.isMDXComponent=!0;var g=t(415);const b={},h="Basic UI",y={unversionedId:"tutorials/design-automation/basic-app-ui",id:"tutorials/design-automation/basic-app-ui",title:"Basic UI",description:"The interface is based on vanilla HTML5 & JavaScript. It essentially the same for any server-side, but there are a few differences: the Websocket implementation uses socket.io (Node.js) or SignalR (.NET 6).",source:"@site/docs/03-tutorials/04-design-automation/01-basic-app-ui.mdx",sourceDirName:"03-tutorials/04-design-automation",slug:"/tutorials/design-automation/basic-app-ui",permalink:"/tutorials/design-automation/basic-app-ui",draft:!1,editUrl:"https://github.com/autodesk-platform-services/aps-tutorials-website/edit/master/docs/03-tutorials/04-design-automation/01-basic-app-ui.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Create Server",permalink:"/tutorials/design-automation/create-server"},next:{title:"Create Plugin",permalink:"/tutorials/design-automation/prepare-plugin"}},w={},k=[{value:"ApsDesignAutomation.js",id:"apsdesignautomationjs",level:2}],x={toc:k};function A(n){let{components:e,...t}=n;return(0,i.kt)("wrapper",(0,a.Z)({},x,t,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"basic-ui"},"Basic UI"),(0,i.kt)("p",null,"The interface is based on vanilla HTML5 & ",(0,i.kt)("inlineCode",{parentName:"p"},"JavaScript"),". It essentially the same for any server-side, but there are a few differences: the Websocket implementation uses socket.io (",(0,i.kt)("inlineCode",{parentName:"p"},"Node.js"),") or SignalR (",(0,i.kt)("inlineCode",{parentName:"p"},".NET 6"),").\nLet's start with the UI (",(0,i.kt)("inlineCode",{parentName:"p"},"HTML")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"JavaScript"),") files. Under the ",(0,i.kt)("inlineCode",{parentName:"p"},"wwwroot")," folder, create an ",(0,i.kt)("inlineCode",{parentName:"p"},"index.html")," file with the following content:"),(0,i.kt)(g.Z,{NodeJsVsCode:r,DotNetVsCode:d,DotNetVs2022:d,mdxType:"EnvTabs"}),(0,i.kt)("h2",{id:"apsdesignautomationjs"},"ApsDesignAutomation.js"),(0,i.kt)("p",null,"Create a ",(0,i.kt)("inlineCode",{parentName:"p"},"js")," folder under the ",(0,i.kt)("inlineCode",{parentName:"p"},"wwwroot")," folder. Then, inside the ",(0,i.kt)("inlineCode",{parentName:"p"},"wwwroot/js")," folder, create an ",(0,i.kt)("inlineCode",{parentName:"p"},"ApsDesignAutomation.js")," file with the following content:"),(0,i.kt)(g.Z,{NodeJsVsCode:c,DotNetVsCode:v,DotNetVs2022:v,mdxType:"EnvTabs"}))}A.isMDXComponent=!0},4562:(n,e,t)=>{t.d(e,{Z:()=>a});const a=t.p+"assets/images/vs2022-basicui-run-0b3e7cb65c75f2ed504fecba0a20c6de.webp"},6943:(n,e,t)=>{t.d(e,{Z:()=>a});const a=t.p+"assets/images/vscode-nodejs-basicui-run-7f1f37d9119d5d129da5ea0e192a77a5.webp"}}]);